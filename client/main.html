<head>
  <title>Suventure - Coding Task</title>
  <style type="text/css">
  </style>
</head>

<body>
  <div class="container">
    <div class="row">
      <div class="col m12 l4 s4">
        <div class="card blue-grey lighten-4">
          <div  class="card-content">
            <div class="card-title">Signin or Signup:</div>
            <div id="loginButtons"></div>
          </div>
        </div>
        <div id="allUsers"></div>
      </div>
      <div class="col m12 l8 s4">
        <div id="conversation" ></div>
      </div>
    </div>
  </div>
</body>

<template name="allUsers">
  <div class="card">
    <div class="card-content">
      <div class="card-title">Registered Users:</div>
      {{#each users}}
        <a href="#" class="username" data-user-id="{{_id}}">{{emails.[0].address}}</a><br>
      {{/each}}
    </div>
  </div>
</template>
<template name="conversation">
  {{#if showConversation}}
    <div class="card blue-grey lighten-3">
      <div class="card-content">
        <div class="row">
          <div class="col m12 s6 l6">
            <div class="card">
              <div class="card-content">
                <div class="card-image">
                  <img src="/img/profile.jpg" alt="">
                  <div class="card-title">{{username currentConversation}}</div>
                </div>
                <div class="card-title">Profile</div>
                <p>
                  User ID: {{currentConversation}} <br>
                  Email ID: {{username currentConversation}} <br>
                </p>
              </div>
              </div>
          </div>
          <div class="col s6 l6">
            <div class="card">
              <div class="card-content">
                <div class="card-title">
                  Conversation with {{username currentConversation}}
                </div>
                {{>chatbox messages=messages}}
                {{>quickForm id="sendMsg" collection="Messages"}}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  {{else}}
    <div class="card">
      <div class="card-content">
        {{{noConversationMsg}}}
      </div>
    </div>
  {{/if}}
</template>

<template name="chatbox">
  <div id="chatbox" class="card-panel">
    {{#each messages}}
      <span class="small">{{sentAt}}<br></span>
      <b>{{username from}}:</b> {{msg}}<br><br>
    {{/each}}
  </div>
</template>